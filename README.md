<h1 align="center">
  <br />
  ðŸ’Ž
  <br />
  better-zod-errors
  <sup>
    <br />
    <br />
  </sup>    
</h1>

<div align="center">
    <a href="https://github.com/async3619/better-zod-errors/blob/main/LICENSE">
        <img src="https://img.shields.io/github/license/async3619/better-zod-errors.svg?style=flat-square" alt="MIT License" />
    </a>
    <br />
    <sup>formatted and more descriptive error messages for Zod validation</sup>
    <br />
    <br />
</div>

## Introduction

This library provides set of functions to format and enhance error messages generated by [Zod](https://zod.dev/) with code frames.

## Installation

```bash
$ npm install better-zod-errors
# or
$ yarn add better-zod-errors
# or
$ pnpm add better-zod-errors
```

## Usage

First, you need to validate your data using Zod schema. If validation fails, you can catch the `ZodError` and format the error messages using `formatError` function from this library.

```typescript
import { z } from "zod";
import { formatError } from "better-zod-errors";

const schema = z.object({
  name: z.string().min(2, "Name must be at least 2 characters long"),
  age: z.number().min(0, "Age must be a positive number"),
});

const payload = {
  name: "A",
  age: -5,
};

try {
  schema.parse(payload);
} catch (e) {
  if (e instanceof z.ZodError) {
    for (const issue of e.issues) {
      const formattedError = formatError(issue, payload);
      console.log(formattedError); // formatted error message with code frame
    }
  } else {
    // handle other errors
  }
}
```

## API

### `formatError(issue: z.ZodIssue, data: any, [options: FormatErrorOptions]): string`

Formats a single Zod issue into a more readable error message with a code frame.

#### `issue`

Type: `z.ZodIssue`

The Zod issue to format thrown during validation with `ZodError`.

#### `data`

Type: `any`

The original data that was validated. If the data was not matched with the original structure, it may throw an error.

#### `options`

Type: `FormatErrorOptions` (optional)

##### `useColor`

Type: `boolean` (default: `true`)

Whether to use ANSI colors in the output. Set to `false` to disable colors.

##### `syntaxHighlighting`

Type: `boolean` (default: `true`)

Whether to use syntax highlighting in the code frame. Set to `false` to disable syntax highlighting.